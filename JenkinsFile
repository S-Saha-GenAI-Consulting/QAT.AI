node {
    try {        
       stage('checkout code') {
            sh '''
                git clone https://github.com/S-Saha-GenAI-Consulting/QAT.AI.git            
                cd QAT.AI
                '''
        }
        stage('Install JDK-17') {
            sh '''  
                #!/bin/bash
                export JAVA_HOME=/Users/sayantansaha/Downloads/jdk-17.0.12.jdk/Contents/Home
            '''
        }
        stage('Run Test') {
            sh '''
                #!/bin/bash
                
                ./mvnw clean test
            '''
        }
    } catch (e) {
        echo 'Build failed with errors'
        throw e
    } finally {
        def currentResult = currentBuild.result
        if (currentResult == 'FAILURE') {
            notifyEmail(emailTo)
        }
    }
}